!function(t){"use strict";t.fn.hootWidgetIconPicker=function(){return this.each(function(){var i=t(this),e=i.siblings(".hoot-icon-picker-box"),o=i.siblings(".hoot-icon-picked"),n=o.children("i"),s=e.find("i");o.on("click",function(){e.toggle()}),s.on("click",function(){var o=t(this).data("value");s.removeClass("selected");var r=t(this).hasClass("cmb-icon-none")?"":"selected";t(this).addClass(r),n.removeClass().addClass(r+" "+o),i.val(o),i.trigger("change"),e.toggle()})})},t(document).on("click",function(i){t(i.target).closest(".hoot-icon-picker-box").length||t(i.target).closest(".hoot-icon-picked").length||t(".hoot-icon-picker-box").hide()}),t.fn.hootWidgetImageUpload=function(){return this.each(function(){if("undefined"!=typeof wp&&wp.media&&wp.media.editor){var i=t(this),e=i.siblings(".hoot-image"),o=i.children(".hoot-image-selected-img"),n=i.siblings(".hoot-image-remove");n.on("click",function(t){t.preventDefault(),e.val(""),e.trigger("change"),o.css("background-image","none")}),i.on("click",function(t){var n=i.data("frame");return n?(n.open(),!1):(n=wp.media({title:i.data("title"),library:{type:i.data("library").split(",").map(function(t){return t.trim()})},button:{text:i.data("update"),close:!1}}),i.data("frame",n),n.on("select",function(){var t=n.state().get("selection").first().attributes;e.val(t.id),e.trigger("change");var i="";i="undefined"!=typeof t.sizes?"undefined"!=typeof t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url:t.icon,o.css("background-image","url("+i+")"),n.close()}),n.open(),!1)})}})},t.fn.hootWidgetCollapser=function(){return this.each(function(){var i=t(this),e=i.siblings(".hoot-collapse-body");i.on("click",function(){e.toggle()})})},t.fn.hootSetupWidget=function(){var i=function(i,n,s){i.find(".hoot-widget-field-group-add").each(function(){var i=t(this),s=i.siblings(".hoot-widget-field-group-items"),r=i.parent(".hoot-widget-field-group").data("id"),d=window.hoot_widget_helper[n][r];i.on("click",function(){var n=parseInt(t(this).data("iterator")),r=parseInt(t(this).data("limit"));if(r){var a=t(this).data("limitmsg"),l=t(this).siblings(".hoot-widget-field-group-items").children().length;if(l+1>=r&&t(this).addClass("maxreached"),l>=r)return a&&alert(a),!1}n++,t(this).data("iterator",n);var c=d.trim().replace(/975318642/g,n),h=t(c);e(h),o(h),h.find(".hoot-icon").hootWidgetIconPicker(),h.find(".hoot-image-selected").hootWidgetImageUpload(),h.find(".hoot-color").wpColorPicker(),h.find(".hoot-select2").select2(),s.append(h),s.hasClass("issortable")&&s.sortable("refresh"),i.closest(".hoot-widget-form").find("input").filter(":first").trigger("change")})}),i.find(".hoot-widget-field-group-top").click(function(){t(this).toggleClass("open"),t(this).is(".open")?t(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").show():t(this).siblings(".hoot-widget-field-group-items").find(".hoot-widget-field-group-item-form").hide()})},e=function(i){i.find(".hoot-widget-field-group-item-top").on("click",function(){t(this).siblings(".hoot-widget-field-group-item-form").toggle()})},o=function(i){i.find(".hoot-widget-field-group-remove").on("click",function(){t(this).closest(".hoot-widget-form").find("input").filter(":first").trigger("change"),t(this).closest(".hoot-widget-field-group-items").siblings(".hoot-widget-field-group-add").removeClass("maxreached"),t(this).closest(".hoot-widget-field-group-item").remove()})};return this.each(function(n,s){var r=t(s),d=r.data("class"),a=r.find(".hoot-widget-field-group-items");if(r.data("hoot-form-setup")===!0)return!0;var l=r.closest(".widget");return l.length>0&&l.attr("id").indexOf("__i__")>-1?!0:(r.find(".hoot-icon").hootWidgetIconPicker(),r.find(".hoot-image-selected").hootWidgetImageUpload(),r.find(".hoot-color").wpColorPicker(),r.find(".hoot-select2").select2(),r.find(".hoot-collapse-head").hootWidgetCollapser(),a.hasClass("issortable")&&a.sortable({handle:".fa-arrows-alt",placeholder:"hoot-widget-field-sortlistitem-placeholder",forcePlaceholderSize:!0}),i(r,d,!1),e(r),o(r),void r.trigger("hootwidgetformsetup").data("hoot-form-setup",!0))})},t(".hoot-widget-form").hootSetupWidget(),t(".widgets-holder-wrap").on("click",".widget:has(.hoot-widget-form) .widget-top",function(){var i=t(this).closest(".widget").find(".hoot-widget-form");setTimeout(function(){i.hootSetupWidget()},200)})}(jQuery);