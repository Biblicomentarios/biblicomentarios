!function(){var s=this,i=wp.data.dispatch("core/notices"),o=jQuery("<p/>").addClass("ilj_index_rebuild_notification_title").html("<strong>Internal Link Juicer:</strong>").css({margin:"0 0 3px 0"});this.wasSavingPost=wp.data.select("core/editor").isSavingPost(),this.wasAutosavingPost=wp.data.select("core/editor").isAutosavingPost(),this.wasPreviewingPost=wp.data.select("core/editor").isPreviewingPost(),this.format_notice=function(){var i=jQuery(".ilj_index_rebuild_notification"),e=i.closest(".components-notice"),t=jQuery("<div/>").css({width:"100%",display:"block",height:"1px"});e.find(".ilj_index_rebuild_notification_title").length||(e.find(".components-notice__content").prepend(o),i.before(t))},this.show_notification=function(){return i.createNotice("warning",ilj_index_rebuild_notifier.message,{type:"default",isDismissible:!0,id:"ilj-index-rebuild",actions:[{label:ilj_index_rebuild_notifier.label,className:"button ilj_index_rebuild_notification",onClick:function(){var i,t,s=jQuery(".ilj_index_rebuild_notification"),n=s.closest(".components-notice");s.attr("disabled")||(i=jQuery("<span/>").addClass("ilj-gutenberg-notice spinner is-active"),t=function(i,e){var t=s.closest(".components-notice__content");i.hide(),t.fadeOut(),t.html(i.html()),t.prepend(o),t.fadeIn(),"is-warning"!=e&&n.addClass(e).removeClass("is-warning")},s.after(i),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilj_rebuild_index"},statusCode:{500:function(i){var e;!1 in i||!["success","error"].includes(i.responseJSON.status)?(e=jQuery(ilj_index_rebuild_notifier.error_500).find("p.message"),t(e,"is-warning")):(e=jQuery(i.responseJSON.message),t(e,"is-success"))}},success:function(i){i=jQuery(i.message).find("p.message");t(i,"is-success")}}),s.attr("disabled",!0))}}]}).then(s.format_notice())},jQuery(document).ready(function(){setTimeout(function(){1===parseInt(ilj_index_rebuild_notifier.notifier_flag)&&s.show_notification()},2e3)}),wp.data.subscribe(function(){var i=wp.data.select("core/editor").isSavingPost(),e=wp.data.select("core/editor").isAutosavingPost(),t=wp.data.select("core/editor").isPreviewingPost(),t=this.wasSavingPost&&!i&&!this.wasAutosavingPost||this.wasAutosavingPost&&this.wasPreviewingPost&&!t;this.wasSavingPost=i,this.wasAutosavingPost=e,t&&s.show_notification()})}();