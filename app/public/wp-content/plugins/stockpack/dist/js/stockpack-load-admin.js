!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=4)}([function(e,t,i){"use strict";var s=wp.media.View.extend({tagName:"li",className:"attachment",template:wp.template("stockpack-attachment"),events:{click:"toggleSelectionHandler",keydown:"toggleSelectionHandler","click .check":"checkClickHandler","click .download":"downloadClickHandler"},buttons:{check:!0},maybeUpdateGlobalProvider:function(){var e=this.options.provider,t=this.model.get("provider");e!==t&&this.controller.trigger("update_provider",t)},initialize:function(){var e=this.options.selection;this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"add",this.select),this.listenTo(this.model,"remove",this.deselect),e&&(e.on("reset",this.updateSelect,this),this.listenTo(this.model,"selection:single selection:unsingle",this.details),this.details(this.model,this.controller.state().get("selection"))),this.maybeUpdateGlobalProvider()},dispose:function(){var e=this.options.selection;return e&&e.off(null,null,this),wp.media.View.prototype.dispose.apply(this,arguments),this},render:function(){var e=_.defaults(this.model.toJSON(),{orientation:"landscape",type:"image",subtype:"",width:"",height:"",caption:"",description:""},this.options);return e.buttons=this.buttons,"image"===e.type&&(e.size=this.imageSize("thumbnail")),this.views.detach(),this.$el.html(this.template(e)),this.updateSelect(),this.views.render(),this},toggleSelectionHandler:function(e){var t;if("INPUT"!==e.target.nodeName&&"BUTTON"!==e.target.nodeName&&"A"!==e.target.nodeName)if(37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode){if("keydown"!==e.type||13===e.keyCode||32===e.keyCode){if(e.preventDefault(),this.controller.isModeActive("grid")){if(this.controller.isModeActive("edit"))return void this.controller.trigger("edit:attachment",this.model,e.currentTarget);this.controller.isModeActive("select")&&(t="toggle")}e.shiftKey?t="between":(e.ctrlKey||e.metaKey)&&(t="toggle"),this.toggleSelection({method:t}),this.controller.trigger("selection:toggle")}}else this.controller.trigger("attachment:keydown:arrow",e)},toggleSelection:function(e){var t,i,s,n=e&&e.method,o=this.options.selection;if(o){var r=this.collection,a=this.model,l=o.single();if("between"===(n=_.isUndefined(n)?o.multiple:n)&&l&&o.multiple){if(l===a)return;return t=(i=r.indexOf(l))<(s=r.indexOf(this.model))?r.models.slice(i,s+1):r.models.slice(s,i+1),o.add(t),void o.single(a)}if("toggle"===n)return o[this.selected()?"remove":"add"](a),void o.single(a);if("add"===n)return o.add(a),void o.single(a);n||(n="add"),"add"!==n&&(n="reset"),this.selected()?o[l===a?"remove":"single"](a):(o[n](a),o.single(a))}},updateSelect:function(){this[this.selected()?"select":"deselect"]()},selected:function(){var e=this.options.selection;if(e)return!!e.get(this.model.cid)},select:function(e,t){var i=this.options.selection,s=this.controller;!i||t&&t!==i||this.$el.hasClass("selected")||(this.$el.addClass("selected").attr("aria-checked",!0),s.isModeActive("grid")&&s.isModeActive("select")||this.$(".check").attr("tabindex","0"))},deselect:function(e,t){var i=this.options.selection;!i||t&&t!==i||this.$el.removeClass("selected").attr("aria-checked",!1).find(".check").attr("tabindex","-1")},details:function(e,t){var i=this.options.selection;if(i===t){var s=i.single();this.$el.toggleClass("details",s===this.model)}},imageSize:function(e){var t=this.model.get("sizes"),i=!1;return e=e||"medium",t&&(t[e]?i=t[e]:t.large?i=t.large:t.thumbnail?i=t.thumbnail:t.full&&(i=t.full),i)?_.clone(i):{url:this.model.get("url"),width:this.model.get("width"),height:this.model.get("height"),orientation:this.model.get("orientation")}},checkClickHandler:function(e){var t=this.options.selection;t&&(e.stopPropagation(),t.where({id:this.model.get("id")}).length?(t.remove(this.model),this.$el.focus()):t.add(this.model))},downloadClickHandler:function(e){this.controller.trigger("download-file",this.model,e.currentTarget)}});function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$={},this.$.element=t,this.timerTimeout=null,this.seconds=0,this.timer()}var t,i,s;return t=e,(i=[{key:"timer",value:function(){var e=this;if(!this.$.element.length)return!1;if(!this.$.element.hasClass("parsed")){this.seconds=0;var t=this.$.element.text().split(":"),i=1;t.reverse().forEach(function(t){e.seconds+=i*t,i*=60}),this.$.element.addClass("parsed")}var s=Math.floor(this.seconds/24/60/60),n=Math.floor(this.seconds-86400*s),o=Math.floor(n/3600),r=Math.floor(n-3600*o),a=Math.floor(r/60),l=this.seconds%60;function c(e){return e<10?"0"+e:e}var d=c(o)+":"+c(a)+":"+c(l);if(s&&(d=c(s)+":"+d),this.$.element.text(d),0===this.seconds)return clearTimeout(this.timerTimeout),this.$.element.parent().text(wp.media.view.l10n.stockpack.limit.reset),!1;this.seconds--,clearTimeout(this.timerTimeout),this.timerTimeout=setTimeout(function(){e.timer()},1e3,this)}},{key:"destroy",value:function(){this.$.el&&this.$.el.remove(),clearTimeout(this.timerTimeout)}}])&&n(t.prototype,i),s&&n(t,s),e}();function r(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$={},this.$.element=t,this.$.iframe=this.$.element.find("iframe"),this.iframe=this.$.iframe[0].contentWindow,this.$.iframeStatus=this.$.element.find(".iframe-status");var s=Backbone.Model.extend({defaults:{loggedIn:!1,page:""}});this.controller=i,this.state=new s,this.setStatus(wp.media.view.l10n.stockpack.limit.anonymous.status.initial),this.bindState(),this.bindMessages(),this.bindUi()}var t,i,s;return t=e,(i=[{key:"bindState",value:function(){this.state.on("change:page",this.pageChanged,this)}},{key:"bindUi",value:function(){var e=this;this.$.iframe.on("load",function(){e.isLoggedIn()}),this.pollUntilChange()}},{key:"pollUntilChange",value:function(){var e=this;if(this.state.get("page"))return!1;this.isLoggedIn(),setTimeout(function(){e.pollUntilChange()},3e3)}},{key:"pageChanged",value:function(){switch(this.state.get("page")){case"/providers":this.setStatus(wp.media.view.l10n.stockpack.limit.anonymous.status.providers),this.getToken();break;case"/login":this.setStatus(wp.media.view.l10n.stockpack.limit.anonymous.status.login);break;case"/register":this.setStatus(wp.media.view.l10n.stockpack.limit.anonymous.status.register);break;default:this.setStatus(wp.media.view.l10n.stockpack.limit.anonymous.status.elsewhere)}}},{key:"setStatus",value:function(e){this.$.iframeStatus.text(e)}},{key:"sendMessage",value:function(e){this.iframe.postMessage(JSON.stringify(e),"*")}},{key:"getToken",value:function(){this.sendMessage({query:"getToken"})}},{key:"receiveToken",value:function(e){var t=this,i=i||{};i.context=this,i.data=_.extend(i.data||{},{action:"token-stockpack",security:wp.media.view.settings.stockpack.nonce_token,token:e}),wp.media.ajax(i).done(function(){t.controller.trigger("token-updated")})}},{key:"isLoggedIn",value:function(){this.sendMessage({query:"isLoggedIn"})}},{key:"bindMessages",value:function(){var e=this;window.addEventListener("message",function(t){e.receiveMessage(t)})}},{key:"receiveMessage",value:function(e){var t={};try{t=JSON.parse(e.data)}catch(e){return!1}switch(t.query){case"isLoggedIn":this.state.set("loggedIn",t.value),this.state.set("page",t.page);break;case"getToken":this.receiveToken(t.value)}}},{key:"destroy",value:function(){this.$.el&&this.$.el.remove()}}])&&r(t.prototype,i),s&&r(t,s),e}();function l(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var c=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$={},this.$.element=t,this.$.iframe=this.$.element.find("iframe"),this.iframe=this.$.iframe[0].contentWindow,this.$.iframeStatus=this.$.element.find(".iframe-status");var s=Backbone.Model.extend({defaults:{loggedIn:!1,upgraded:!1,page:""}});this.controller=i,this.state=new s,this.setStatus(wp.media.view.l10n.stockpack.limit.free.status.initial),this.bindState(),this.bindMessages(),this.bindUi()}var t,i,s;return t=e,(i=[{key:"bindState",value:function(){this.state.on("change:page",this.pageChanged,this)}},{key:"bindUi",value:function(){var e=this;this.$.iframe.on("load",function(){e.isLoggedIn()}),this.pollUntilChange()}},{key:"pollUntilChange",value:function(){var e=this;if(this.state.get("page"))return!1;this.isLoggedIn(),setTimeout(function(){e.pollUntilChange()},3e3)}},{key:"pollUntilChangeUpgraded",value:function(){var e=this;return!this.state.get("upgraded")&&("/billing"===this.state.get("page")&&(this.getUpgraded(),void setTimeout(function(){e.pollUntilChangeUpgraded()},3e3)))}},{key:"pageChanged",value:function(){switch(this.state.get("page")){case"/billing":this.setStatus(wp.media.view.l10n.stockpack.limit.free.status.billing),this.pollUntilChangeUpgraded();break;case"/login":this.setStatus(wp.media.view.l10n.stockpack.limit.free.status.login);break;case"/register":this.setStatus(wp.media.view.l10n.stockpack.limit.free.status.register);break;case"/providers":this.setStatus(wp.media.view.l10n.stockpack.limit.free.status.providers),this.getToken();break;default:this.setStatus(wp.media.view.l10n.stockpack.limit.free.status.elsewhere)}}},{key:"getToken",value:function(){this.sendMessage({query:"getToken"})}},{key:"receiveToken",value:function(e){var t=this,i=i||{};i.context=this,i.data=_.extend(i.data||{},{action:"token-stockpack",security:wp.media.view.settings.stockpack.nonce_token,token:e}),wp.media.ajax(i).done(function(){t.controller.trigger("account-upgraded")})}},{key:"setStatus",value:function(e){this.$.iframeStatus.text(e)}},{key:"sendMessage",value:function(e){this.iframe.postMessage(JSON.stringify(e),"*")}},{key:"getUpgraded",value:function(){this.sendMessage({query:"hasUpgraded"})}},{key:"hasUpgraded",value:function(e){this.state.set("upgraded",e),e&&(this.sendMessage({query:"goToProviders"}),this.pollUntilChange())}},{key:"isLoggedIn",value:function(){this.sendMessage({query:"isLoggedIn"})}},{key:"bindMessages",value:function(){var e=this;window.addEventListener("message",function(t){e.receiveMessage(t)})}},{key:"receiveMessage",value:function(e){var t={};try{t=JSON.parse(e.data)}catch(e){return!1}switch(t.query){case"isLoggedIn":this.state.set("loggedIn",t.value),this.state.set("page",t.page);break;case"hasUpgraded":this.hasUpgraded(t.value);break;case"getToken":this.receiveToken(t.value)}}},{key:"destroy",value:function(){}}])&&l(t.prototype,i),s&&l(t,s),e}(),d=wp.media.View.extend({tagName:"div",className:"stockpack-dialog fusion-builder-dialog",template:wp.template("stockpack-dialog"),events:{"click .ui-widget-overlay":"close","click .ui-dialog-titlebar-close":"close"},defaults:{id:"stockpack-dialog",title:"",message:"",link:"",error:"",iframe:"",state:"",external:"",externalUrl:"",directLicenseUrl:""},timer:null,register:null,upgrade:null,controller:null,initialize:function(){this.options.controller&&(this.controller=this.options.controller,delete this.options.controller),this.model=new Backbone.Model(this.defaults),_.each(this.defaults,function(e,t){var i=this.options[t];_.isUndefined(i)||(this.model.set(t,i),delete this.options[t])},this),this.insertElement(),this.listenTo(this.model,"change",this.render),this.createDialog(),this.maybeCreateTimer(),this.maybeHookRegister(),this.maybeHookUpgrade()},maybeCreateTimer:function(){this.$el.find(".stockpack-timer").length&&(this.timer=new o(this.$el.find(".stockpack-timer")))},maybeHookRegister:function(){var e=this.$el.find("iframe#stockpack-token-iframe");e.length>0&&(this.register=new a(e.parent(),this.controller),this.controller.on("token-updated",_.bind(this.startRetry,this)))},maybeHookUpgrade:function(){var e=this.$el.find("iframe#stockpack-upgrade-iframe");e.length>0&&(this.upgrade=new c(e.parent(),this.controller),this.controller.on("account-upgraded",_.bind(this.startRetry,this)))},startRetry:function(){this.controller.trigger("start-retry"),this.close()},createDialog:function(){var e=this;this.$el.data("initialized","true").dialog({title:this.model.get("title"),dialogClass:this.dialogClass(),autoOpen:!1,draggable:!1,width:"auto",modal:!0,resizable:!1,closeOnEscape:!0,close:function(){e.close()},position:{my:"center",at:"center",of:window}})},setStatus:function(e){this.model.set("state",e),this.render()},setExternalUrl:function(e){this.model.set("externalUrl",e),this.render()},buttons:function(e){this.$el.dialog("option","buttons",e)},insertElement:function(){var e=jQuery('<div id="'+this.model.get("id")+'" data-title="'+this.model.get("title")+'"></div> ');jQuery("body").append(e),this.setElement(e),this.render()},dispose:function(){this.$el.data("initialized")&&this.$el.dialog("destroy"),this.$el.remove(),this.timer&&this.timer.destroy(),this.register&&this.register.destroy(),this.upgrade&&this.upgrade.destroy()},prepare:function(){return this.model.toJSON()},close:function(){this.$el.data("initialized")&&this.$el.dialog("close"),this.dispose()},open:function(){this.$el.dialog("open")},dialogClass:function(){var e,t="wp-dialog stockpack-dialog ";return e="fb-edit",(window.location.search.match(new RegExp("[?&]"+e+"=([^&]+)"))||[,null])[1]&&(t+="fusion-builder-dialog"),t}});function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),s.forEach(function(t){u(e,t,i[t])})}return e}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p=wp.media.View.extend({tagName:"ul",className:"attachments",attributes:{tabIndex:-1},dialog:null,initialize:function(){this.el.id=_.uniqueId("__stockpack-images-view-"),_.defaults(this.options,{sortable:!1,refreshSensitivity:wp.media.isTouchDevice?300:200,refreshThreshold:1.5,resize:!0,idealColumnWidth:jQuery(window).width()<640?135:150,provider:""}),this._viewsByCid={},this.$window=jQuery(window),this.resizeEvent="resize.media-modal-columns",this.fixScroll=_.debounce(this.maybeFixScroll.bind(this),700),this.collection.on("add",function(e){this.views.add(this.createAttachmentView(e),{at:this.collection.indexOf(e)}),this.fixScroll()},this),this.collection.on("remove",function(e){var t=this._viewsByCid[e.cid];delete this._viewsByCid[e.cid],t&&t.remove()},this),this.collection.on("reset",this.render,this),this.collection.on("query_error",_.debounce(this.queryError,150),this),this.scroll=_.chain(this.scroll).bind(this).throttle(this.options.refreshSensitivity).value(),this.options.scrollElement=this.options.scrollElement||this.el,jQuery(this.options.scrollElement).on("scroll",this.scroll),_.bindAll(this,"setColumns"),this.options.resize&&(this.on("ready",this.bindEvents),this.controller.on("open",this.setColumns),_.defer(this.setColumns,this)),this.prepareDebounced=_.debounce(this.prepare.bind(this),700)},createAttachmentView:function(e){var t=new s({model:e,collection:this.collection,selection:this.options.selection,controller:this.controller,provider:this.options.provider});return this._viewsByCid[e.cid]=t},bindEvents:function(){this.$window.off(this.resizeEvent).on(this.resizeEvent,_.debounce(this.setColumns,50))},prepare:function(){if(this.collection.length){var e=this.collection.map(this.createAttachmentView,this);this.views.set(e)}else this.views.unset(),this.collection.more()},maybeFixScroll:function(){this.el.scrollHeight===this.el.clientHeight&&this.scroll()},scroll:function(){var e=this.options.scrollElement,t=e.scrollTop;if(e===document&&(e=document.body,t=jQuery(document).scrollTop()),jQuery(e).is(":visible")&&this.collection.hasMore()){var i=this.views.parent.toolbar;e.scrollHeight-(t+e.clientHeight)<e.clientHeight/3&&i.get("spinner").show(),e.scrollHeight<t+e.clientHeight*this.options.refreshThreshold&&this.collection.more().done(function(){i.get("spinner").hide()})}},setColumns:function(){var e=this.columns,t=this.$el.width();t&&(this.columns=Math.min(Math.round(t/this.options.idealColumnWidth),12)||1,e&&e===this.columns||this.$el.closest(".media-frame-content").attr("data-columns",this.columns))},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")},queryError:function(e){var t=e[0];switch(t.code){case"premium_limit_reached":this.premiumLimit(t);break;case"anonymous_limit_reached":this.anonymousLimit(t);break;case"free_limit_reached":this.freeLimit(t)}},freeLimit:function(e){jQuery("#free-limit").length>0||(this.dialog=new d(h({},wp.media.view.l10n.stockpack.limit.free,{id:"free-limit",error:e.message,controller:this.controller})),this.dialog.open())},anonymousLimit:function(e){jQuery("#anonymous-limit").length>0||(this.dialog=new d(h({},wp.media.view.l10n.stockpack.limit.anonymous,{id:"anonymous-limit",error:e.message,controller:this.controller})),this.dialog.open())},premiumLimit:function(e){var t=this;jQuery("#premium-limit").length>0||(this.dialog=new d(h({},wp.media.view.l10n.stockpack.limit.premium,{id:"premium-limit",error:e.message,controller:this.controller})),this.dialog.buttons([{text:wp.media.view.l10n.stockpack.limit.cancel,click:function(){t.dialog.close()}},{text:wp.media.view.l10n.stockpack.limit.contact,click:function(){window.open(wp.media.view.settings.stockpack.contact_url,"_blank")},class:"button-primary"}]),this.dialog.open())}}),m=wp.media.View.extend({tagName:"div",className:"media-toolbar",initialize:function(){var e=this.controller.state(),t=this.selection=e.get("stockpack-selection"),i=this.library=e.get("stockpack-images");this._views={},this.primary=new wp.media.view.PriorityList,this.secondary=new wp.media.view.PriorityList,this.primary.$el.addClass("media-toolbar-primary search-form"),this.secondary.$el.addClass("media-toolbar-secondary"),this.views.set([this.secondary,this.primary]),this.options.items&&this.set(this.options.items,{silent:!0}),this.options.silent||this.render(),t&&t.on("add remove reset",this.refresh,this),i&&i.on("add remove reset",this.refresh,this)},dispose:function(){return this.selection&&this.selection.off(null,null,this),this.library&&this.library.off(null,null,this),wp.media.View.prototype.dispose.apply(this,arguments)},ready:function(){this.refresh()},set:function(e,t,i){return i=i||{},_.isObject(e)?_.each(e,function(e,t){this.set(t,e,{silent:!0})},this):(t instanceof Backbone.View||(t.classes=["media-button-"+e].concat(t.classes||[]),t=new wp.media.view.Button(t).render()),t.controller=t.controller||this.controller,this._views[e]=t,this[t.options.priority<0?"secondary":"primary"].set(e,t,i)),i.silent||this.refresh(),this},get:function(e){return this._views[e]},unset:function(e,t){return delete this._views[e],this.primary.unset(e,t),this.secondary.unset(e,t),t&&t.silent||this.refresh(),this},refresh:function(){var e=this.controller.state(),t=e.get("stockpack-images"),i=e.get("selection");_.each(this._views,function(e){if(e.model&&e.options&&e.options.requires){var s=e.options.requires,n=!1;i&&i.models&&(n=_.some(i.models,function(e){return!0===e.get("uploading")})),s.selection&&i&&!i.length?n=!0:s.library&&t&&!t.length&&(n=!0),e.model.set("disabled",n)}})}}),g=wp.media.View.extend({tagName:"input",className:"search",id:"stockpack-search-input",attributes:{type:"search",placeholder:wp.media.view.l10n.stockpack.search},events:{input:"search",keyup:"search"},render:function(){return this.el.value=this.model.escape("search"),this},search:_.debounce(function(e){e.target.value?this.model.set("search",e.target.value):this.model.unset("search")},500)}),f=s.extend({tagName:"div",className:"attachment-details",template:wp.template("stockpack-attachment-details"),attributes:function(){return{tabIndex:0,"data-id":this.model.get("id")}},initialize:function(){this.options=_.defaults(this.options,{rerenderOnModelChange:!1}),this.on("ready",this.initialFocus),s.prototype.initialize.apply(this,arguments)},initialFocus:function(){wp.media.isTouchDevice||this.$('input[type="text"]').eq(0).focus()}}),v=wp.media.View.extend({tagName:"div",className:"media-sidebar stockpack-sidebar",initialize:function(){this._views={},this.set(_.extend({},this._views,this.options.views),{silent:!0}),delete this.options.views,this.options.silent||this.render()},set:function(e,t,i){var s;if(i=i||{},_.isObject(e))return _.each(e,function(e,t){this.set(t,e)},this),this;t instanceof Backbone.View||(t=this.toView(t,e,i)),t.controller=t.controller||this.controller,this.unset(e);var n=t.options.priority||10,o=this.views.get()||[];return _.find(o,function(e,t){if(e.options.priority>n)return s=t,!0}),this._views[e]=t,this.views.add(t,{at:_.isNumber(s)?s:o.length||0}),this},get:function(e){return this._views[e]},unset:function(e){var t=this.get(e);return t&&t.remove(),delete this._views[e],this},toView:function(e){return new wp.media.View(e)}}),w=wp.media.View.extend({tagName:"div",className:"stockpack-empty",template:wp.template("stockpack-empty"),events:{"click .retry":"retry"},defaults:{message:"",link:!1,retry:!0},timer:null,initialize:function(){this.model=new Backbone.Model(this.defaults),_.each(this.defaults,function(e,t){var i=this.options[t];_.isUndefined(i)||(this.model.set(t,i),delete this.options[t])},this),this.listenTo(this.model,"change",this.render),this.controller.on("start-retry",_.bind(this.retry,this))},render:function(){return wp.Backbone.View.prototype.render.apply(this,arguments),this.afterRender(),this},afterRender:function(){this.maybeCreateTimer()},dispose:function(){this.$el.remove(),this.timer&&this.timer.destroy()},prepare:function(){return this.model.toJSON()},maybeCreateTimer:function(){this.$el.find(".stockpack-timer").length&&(this.timer=new o(this.$el.find(".stockpack-timer")))},retry:function(){this.options.browser.updateContent()},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}});function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),s.forEach(function(t){y(e,t,i[t])})}return e}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b=wp.media.View.extend({tagName:"div",className:"stockpack-downloader",template:wp.template("stockpack-downloader"),file:null,dialog:null,canLicense:!1,initialize:function(){return this.options=_.defaults(this.options,{state:!1}),this.on("upload-completed",function(e){var t=this;_.each(["file","loaded","size","percent"],function(e){t.file.attachment.unset(e)}),this.file.attachment.set(_.extend(e,{uploading:!1})),wp.media.model.Attachment.get(e.id,this.file.attachment),window.StockpackQueue.all(function(e){return!e.get("uploading")})&&window.StockpackQueue.reset()}),this.controller.on("download-file",this.downloadTrigger,this),this.controller.on("download-quick-file",this.downloadQuickTrigger,this),this},events:{"click .download-stockpack-image":"download","click .license-stockpack-image":"showLicense"},prepare:function(){var e={download:wp.media.view.l10n.stockpack.download,license:wp.media.view.l10n.stockpack.licenseAction,alreadyLicensed:wp.media.view.l10n.stockpack.alreadyLicensed,model:this.model.attributes};return wp.media.view.l10n.stockpack.attribution[this.getProvider()].warning&&(e.warning=wp.media.view.l10n.stockpack.attribution[this.getProvider()].warning),"yes"===wp.media.view.settings.stockpack.filename_change&&(e.filename_change=!0,e.filename_placeholder=wp.media.view.l10n.stockpack.filename.placeholder,e.desired_filename=""),e},setLicenseCost:function(){var e=this,t=t||{};t.context=this,t.data=_.extend(t.data||{},{action:"license_cost-stockpack",security:wp.media.view.settings.stockpack.nonce_license_cost,media_id:this.model.id,provider:this.getProvider()}),wp.media.ajax(t).done(function(t){if(e.dialog.setStatus(t.cost_message),t.can_license)e.canLicense=!0,jQuery(".license-button-in-dialog").attr("disabled",!1).removeClass("ui-button-disabled ui-state-disabled");else{var i=e.model.get("extra");e.dialog.setExternalUrl(i.details_url)}}).fail(function(e){this.dialog.setStatus(e[0].message),jQuery(".license-button-in-dialog").attr("disabled",!0)})},showLicense:function(){var e=this;this.dialog=new d(k({},wp.media.view.l10n.stockpack.licensePopup[this.getProvider()],{id:"license-"+this.getProvider()})),this.setLicenseCost(),this.dialog.buttons([{text:wp.media.view.l10n.stockpack.licensePopup.cancel,click:function(){e.dialog.close()}},{text:wp.media.view.l10n.stockpack.licensePopup.proceed,click:function(){e.licenseAndDownload()},class:"button-primary license-button-in-dialog",disabled:!0}]),this.dialog.open()},licenseAndDownload:function(){this.canLicense?(this.addFileToQueue(1),this.dialog.close()):alert(wp.media.view.l10n.stockpack.licensePopup.checkInProgress)},showTerms:function(){var e=this;this.dialog=new d(k({},wp.media.view.l10n.stockpack.terms[this.getProvider()],{id:"terms-"+this.getProvider()})),this.dialog.buttons([{text:wp.media.view.l10n.stockpack.terms.cancel,click:function(){e.dialog.close()}},{text:wp.media.view.l10n.stockpack.terms.agree,click:function(){e.acceptTerms(),e.download(),e.dialog.close()},class:"button-primary"}]),this.dialog.open()},download:function(){this.termsAccepted()?this.addFileToQueue():this.showTerms()},acceptTerms:function(){wp.media.view.settings.stockpack.terms[this.getProvider()]=!0;var e=e||{};return e.context=this,e.data=_.extend(e.data||{},{action:"terms-stockpack",security:wp.media.view.settings.stockpack.nonce_terms,provider:this.getProvider()}),wp.media.ajax(e).done(function(){})},termsAccepted:function(){return wp.media.view.settings.stockpack.terms[this.getProvider()]},getProvider:function(){return this.model.get("provider")},downloadTrigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.model===e&&this.addFileToQueue(!1,t)},downloadQuickTrigger:function(e){this.downloadTrigger(e,!0)},openMediaTab:function(){var e=this.options.state;"stockpack"===this.controller.content.mode()&&this.controller.content.mode("browse"),e.get("selection").add(this.file.attachment),this.controller.trigger("library:selection:add")},addFileToQueue:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e=0);var i=_.extend({item:this.model,uploading:!0,date:new Date,menuOrder:0,progress:0,filename:"",uploadedTo:wp.media.model.settings.post.id});this.file={stockpackId:this.model.id,mustLicense:e,attachment:new wp.media.model.Attachment(i)},window.StockpackQueue.add(this.file.attachment),t?this.downloadStarted():this.openMediaTab(),this.getFile(e)},getFile:function(e){var t=t||{};if(t.context=this,t.data=_.extend(t.data||{},{action:"cache-stockpack",media_id:this.file.stockpackId,provider:this.getProvider(),security:wp.media.view.settings.stockpack.nonce_cache,post_id:wp.media.model.settings.post.id}),0===e)return wp.media.ajax(t).done(function(e){this.trigger("upload-completed",e)}).fail(function(){this.file.attachment.set("percent",30),this.downloadFile(e)});this.file.attachment.set("percent",30),this.downloadFile(e)},downloadFile:function(e){var t=t||{};void 0===e&&(e=0);var i=this.$el.find(".filename-change input"),s=null;i&&(s=i.val()),t.context=this,t.data=_.extend(t.data||{},{action:"download-stockpack",new_filename:s,media_id:this.file.stockpackId,must_license:this.file.mustLicense,provider:this.getProvider(),security:wp.media.view.settings.stockpack.nonce_download,search_key:this.options.search,post_id:wp.media.model.settings.post.id,description:this.model.get("description")});var n=this,o=setInterval(function(){n.incrementPercent()},1e3);wp.media.ajax(t).done(function(t){if(clearInterval(o),this.trigger("upload-completed",t),0!==e){var i=n.model.get("extra");i.licensed=!0,n.model.set("extra",i)}}).fail(function(e){clearInterval(o),this.error(e.message,null,this.file)})},incrementPercent:function(){this.file.attachment.get("percent")<99&&this.file.attachment.set({percent:this.file.attachment.get("percent")+4})},downloadStarted:function(){var e=this;this.options.state.get("selection").add(this.file.attachment),this.controller.trigger("library:selection:add"),this.model.set("quickdownloadstarted",!0),setTimeout(function(){e.model.set("quickdownloadstarted",!1)},3e3)},error:function(e,t,i){i.attachment&&i.attachment.destroy(),wp.Uploader.errors.unshift({message:e||pluploadL10n.default_error,data:t,file:i})}}),S=wp.media.View.extend({tagName:"div",className:"stockpack-attribution",template:wp.template("stockpack-attribution"),events:{"click .notice-dismiss":"dismiss"},defaults:{id:"stockpack-attribution",message:"",author_info:"",link:"",link_title:""},dismissed:!1,initialize:function(){this.model=new Backbone.Model(this.defaults),_.each(this.defaults,function(e,t){var i=this.options[t];_.isUndefined(i)||(this.model.set(t,i),delete this.options[t])},this),this.updateProvider("default"),this.controller.on("update_provider",_.debounce(this.updateProvider,150),this)},show:function(){this.dismissed||this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")},dispose:function(){this.$el.remove()},dismiss:function(){this.$el.hide(),this.dismissed=!0},prepare:function(){return this.model.toJSON()},updateProvider:function(e){var t=wp.media.view.l10n.stockpack.attribution[e];_.each(t,function(e,t){this.model.set(t,e)},this),this.render()}}),x=wp.media.View.extend({tagName:"div",className:"stockpack-no-search",template:wp.template("stockpack-no-search"),defaults:{message:"",inspiration:[]},initialize:function(){this.model=new Backbone.Model(this.defaults),_.each(this.defaults,function(e,t){var i=this.options[t];_.isUndefined(i)||(this.model.set(t,i),delete this.options[t])},this),this.setInspiration(),this.listenTo(this.model,"change",this.render)},setInspiration:function(){var e=this.getRandomInt(1,8);this.model.set("unsure",this.model.get("inspiration").unsure);var t=this.model.get("inspiration").random["item_"+e];this.model.set("illustration",t.image),this.model.set("response",t.message)},render:function(){return wp.Backbone.View.prototype.render.apply(this,arguments),this},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},dispose:function(){this.$el.remove(),this.timer&&this.timer.destroy()},prepare:function(){return this.model.toJSON()},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}}),C=wp.media.View.extend({tagName:"div",className:"stockpack-select-filters",keys:[],initialize:function(){this.createFilters(),_.extend(this.filters,this.options.filters);var e=jQuery("<span></span>",{text:this.label,class:"group-label"}),t=jQuery("<select />");t.html(_.chain(this.filters).map(function(e,t){return{el:jQuery("<option></option>").val(t).html(e.text)[0],priority:e.priority||50}},this).sortBy("priority").pluck("el").value()),this.$el.prepend(t),this.$el.prepend(e),this.controller.on("update-filters",_.bind(this.change,this))},createFilters:function(){this.filters={}},change:function(){var e=this.filters[this.getValue()];e&&this.model.set(e.props)},getValue:function(){return this.$el.find("select").val()}});function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O,M=i(1),E=C.extend({className:"provider-filter",id:"stockpack-provider-filter",hidden:!1,createFilters:function(){var e={},t=1;e.default={text:wp.media.view.l10n.stockpack.filters.provider.default,props:{provider:null},priority:t,id:"stockpack-provider-default"};for(var i=wp.media.view.l10n.stockpack.filters.provider.values,s=Object.entries(i),n=0;n<s.length;n++){var o=T(s[n],2),r=o[0],a=o[1];i.hasOwnProperty(r)&&(t++,e[r]={text:a,props:{provider:r},priority:t,id:"stockpack-provider-"+M(r,"_")})}this.filters=e,this.label=wp.media.view.l10n.stockpack.filters.provider.label,this.name="provider",this.default=null},events:{change:"triggerFilter"},render:function(){0===wp.media.view.l10n.stockpack.filters.provider.values.length&&(this.$el.hide(),this.hidden=!0);var e=this.model.escape("provider");return e&&this.$el.find("select").val(e),this},triggerFilter:function(){this.controller.trigger("update-filters",this.model,event.currentTarget)}}),j=wp.media.View.extend({tagName:"div",className:"stockpack-browser attachments-browser",attribution:null,initialize:function(){_.defaults(this.options,{search:!0,provider:!1}),this.createToolbar(),this.createSidebar(),this.createStatus(),this.createNoSearch(),this.createImages(),this.updateContent(),this.collection.on("add remove reset",this.updateContent,this)},dispose:function(){return this.options.selection.off(null,null,this),wp.media.View.prototype.dispose.apply(this,arguments),this},createImages:function(){this.images=new p({controller:this.controller,collection:this.collection,selection:this.options.selection,scrollElement:this.options.scrollElement,idealColumnWidth:this.options.idealColumnWidth,provider:this.options.provider}),this.views.add(this.images),this.images.hide()},createSidebar:function(){var e=this.options.selection,t=this.sidebar=new v({controller:this.controller});this.views.add(t),e.on("selection:single",this.createSingle,this),e.on("selection:unsingle",this.disposeSingle,this),e.single()&&this.createSingle()},createSingle:function(){var e=this.sidebar,t=this.options.selection.single();e.set("details",new f({controller:this.controller,model:t,priority:80})),e.set("downloader",new b({controller:this.controller,model:t,state:this.model,search:this.collection.props.get("search"),priority:90})),"insert"===this.model.id&&e.$el.addClass("visible")},disposeSingle:function(){var e=this.sidebar;e.unset("details"),e.unset("downloader"),e.$el.removeClass("visible")},updateContent:function(){var e=this;this.toolbar.get("attribution").show(),this.collection.length?(this.displayImages(),this.stopLoading()):(this.startLoading(),this.clearErrors(),this.dfd=this.collection.more().done(function(){e.collection.length?e.displayImages():e.displayEmpty(),e.stopLoading()}).fail(function(t){e.displayError(t),e.stopLoading()}))},createToolbar:function(){var e={controller:this.controller};this.controller.isModeActive("grid")&&(e.className="media-toolbar wp-filter"),this.toolbar=new m(e),this.views.add(this.toolbar),this.toolbar.set("spinner",new wp.media.view.Spinner({priority:-60})),this.addToolbarFilters()},addToolbarFilters:function(){this.toolbar.set("attribution",new S({controller:this.controller,priority:-70}).render()),this.toolbar.set("searchLabel",new wp.media.view.Label({value:wp.media.view.l10n.stockpack.search,attributes:{for:"media-search-input"},priority:60}).render()),this.toolbar.set("search",new g({controller:this.controller,model:this.collection.props,priority:60}).render()),this.createProviderFilter()},createProviderFilter:function(){this.toolbar.set("provider",new E({controller:this.controller,model:this.collection.props,priority:70}).render()),this.toolbar.get("provider").hidden&&this.toolbar.$el.addClass("provider-hidden")},createStatus:function(){var e={controller:this.controller,message:wp.media.view.l10n.stockpack.noMedia,retry:wp.media.view.l10n.stockpack.retry,browser:this};this.controller.isModeActive("grid")&&(e.className="media-toolbar wp-filter"),this.status=new w(e),this.status.hide(),this.views.add(this.status)},createNoSearch:function(){var e={controller:this.controller,message:wp.media.view.l10n.stockpack.noSearch,inspiration:wp.media.view.l10n.stockpack.inspiration};this.noSearch=new x(e),this.noSearch.hide(),this.views.add(this.noSearch)},displayEmpty:function(e){e?(this.noSearch.hide(),this.images.hide(),this.status.show()):(this.clearErrors(),this.images.hide(),this.collection.props.get("search")?(this.noSearch.hide(),this.status.show()):(this.noSearch.show(),this.toolbar.get("attribution").hide(),this.status.hide()))},displayImages:function(){this.clearErrors(),this.status.hide(),this.noSearch.hide(),this.images.show()},displayError:function(e){this.displayEmpty(!0),wp.media.view.l10n.stockpack.error[e.code]?this.status.model.set("message",wp.media.view.l10n.stockpack.error[e.code]):this.status.model.set("message",wp.media.view.l10n.stockpack.error.default),this.status.model.set("error",e.message),2===e.code&&this.status.model.set("link",{url:wp.media.view.settings.stockpack.settings_url,text:wp.media.view.l10n.stockpack.link})},clearErrors:function(){this.status.model.set("message",wp.media.view.l10n.stockpack.noMedia),this.status.model.set("error","")},stopLoading:function(){this.toolbar.get("spinner").hide()},startLoading:function(){this.toolbar.get("spinner").show()}}),U=Backbone.Model.extend({sync:function(e,t,i){return _.isUndefined(this.id)?$.Deferred().rejectWith(this).promise():"read"===e?((i=i||{}).context=this,i.data=_.extend(i.data||{},{action:"get-stockpack-image",id:this.id}),wp.media.ajax(i)):"update"===e?this.get("nonces")&&this.get("nonces").update?((i=i||{}).context=this,i.data=_.extend(i.data||{},{action:"save-attachment",id:this.id,nonce:this.get("nonces").update,post_id:wp.media.model.settings.post.id}),t.hasChanged()&&(i.data.changes={},_.each(t.changed,function(e,t){i.data.changes[t]=this.get(t)},this)),wp.media.ajax(i)):$.Deferred().rejectWith(this).promise():Backbone.Model.prototype.sync.apply(this,arguments)},progress:function(){this.$bar&&this.$bar.length&&this.$bar.width(this.model.get("percent")+"%")}},{create:function(e){return U.all.push(e)},get:_.memoize(function(e,t){return U.all.push(t||{id:e})})}),N=U,P=Backbone.Collection.extend({model:N,initialize:function(e,t){t=t||{},this.props=new Backbone.Model,this.filters=t.filters||{},this.props.on("change",_.debounce(this._changeFilteredProps,250),this),this.props.on("change:query",_.debounce(this._changeQuery,250),this),this.props.set(_.defaults(t.props||{})),this.mirroring={_hasMore:!0,_mock:!0}},mirror:function(e){return this.mirroring&&this.mirroring===e?this:(this.unmirror(),this.mirroring=e,this.reset([],{silent:!0}),this.observe(e),this)},unmirror:function(){this.mirroring&&(this.unobserve(this.mirroring),delete this.mirroring)},_changeQuery:function(e,t){t?(this.props.on("change",_.debounce(this._requery,250),this),this._requery()):this.props.off("change",this._requery,this)},_changeFilteredProps:function(e){if(!this.props.get("query")){if(!_.chain(e.changed).map(function(t,i){var s=P.filters[i],n=e.get(i);if(!s)return!1;if(n&&!this.filters[i])this.filters[i]=s;else{if(n||this.filters[i]!==s)return!1;delete this.filters[i]}return!0},this).any().value())return!1;this._source||(this._source=new P(this.models)),this.reset(this._source.filter(this.validator,this))}},_requery:function(e){var t;this.props.get("query")&&((t=this.props.toJSON()).cache=!0!==e,this.mirror(StockpackQuery.get(t)))},more:function(e){var t=jQuery.Deferred(),i=this.mirroring,s=this;return i&&i.more?(i.more(e).done(function(){this===s.mirroring&&t.resolveWith(this)}).fail(function(e){this===s.mirroring&&(t.rejectWith(this,e),s.trigger("query_error",e))}),t.promise()):t.resolveWith(this).promise()},hasMore:function(){return!!this.mirroring&&this.mirroring.hasMore()},validateDestroyed:!1,validator:function(e){return!(!_.isUndefined(e.attributes.context)&&""!==e.attributes.context)&&(!(!this.validateDestroyed&&e.destroyed)&&_.all(this.filters,function(t){return!!t.call(this,e)},this))},validate:function(e,t){var i=this.validator(e),s=!!this.get(e.cid);return!i&&s?this.remove(e,t):i&&!s&&this.add(e,t),this},validateAll:function(e,t){return t=t||{},_.each(e.models,function(e){this.validate(e,{silent:!0})},this),t.silent||this.trigger("reset",this,t),this},observe:function(e){return this.observers=this.observers||[],this.observers.push(e),e.on("add change remove",this._validateHandler,this),e.on("reset",this._validateAllHandler,this),this.validateAll(e),this},unobserve:function(e){return e?e._mock||(e.off(null,null,this),this.observers=_.without(this.observers,e)):(_.each(this.observers,function(e){e.off(null,null,this)},this),delete this.observers),this},_validateHandler:function(e,t,i){return i=t===this.mirroring?i:{silent:i&&i.silent},this.validate(e,i)},_validateAllHandler:function(e,t){return this.validateAll(e,t)}},{filters:{search:function(e){return!this.props.get("search")||_.any(["description"],function(t){var i=e.get(t);return i&&-1!==i.search(this.props.get("search"))},this)}}});window.StockpackQuery=P.extend({initialize:function(e,t){t=t||{},P.prototype.initialize.apply(this,arguments),this.args=t.args,this._hasMore=!0,this.created=new Date},hasMore:function(){return this._hasMore},more:function(e){var t=this;return this._more&&"pending"===this._more.state()?this._more:this.hasMore()?((e=e||{}).remove=!1,this._more=this.fetch(e).done(function(e){30===e.length&&(this.args.per_page=30),(_.isEmpty(e)||-1===this.args.per_page||e.length<this.args.per_page)&&(t._hasMore=!1)})):jQuery.Deferred().resolveWith(this).promise()},sync:function(e,t,i){var s;return"read"===e?((i=i||{}).context=this,i.data=_.extend(i.data||{},{action:"query-stockpack",security:wp.media.view.settings.stockpack.nonce_query,post_id:wp.media.model.settings.post.id}),-1!==(s=_.clone(this.args)).per_page&&(s.page=Math.round(this.length/s.per_page)+1),i.data.query=s,wp.media.ajax(i)):(P.prototype.sync?P.prototype:Backbone).sync.apply(this,arguments)}},{defaultArgs:{per_page:40},defaultProps:{},propmap:{search:"query",perPage:"per_page"},get:(O=[],function(e,t){var i,s={},n=window.StockpackQuery.defaults,o=!!e.cache||_.isUndefined(e.cache);return delete e.query,delete e.cache,_.defaults(e,n),_.each(["include","exclude"],function(t){e[t]&&!_.isArray(e[t])&&(e[t]=[e[t]])}),_.each(e,function(e,t){_.isNull(e)||(s[window.StockpackQuery.propmap[t]||t]=e)}),_.defaults(s,window.StockpackQuery.defaultArgs),o?i=_.find(O,function(e){return _.isEqual(e.args,s)}):O=[],i||(i=new window.StockpackQuery([],_.extend(t||{},{props:e,args:s})),O.push(i)),i})});var A=P,I=A.extend({initialize:function(e,t){A.prototype.initialize.apply(this,arguments),this.multiple=t&&t.multiple,this.on("add remove reset",_.bind(this.single,this,!1))},add:function(e,t){return this.multiple||this.remove(this.models),A.prototype.add.call(this,e,t)},single:function(e){var t=this._single;return e&&(this._single=e),this._single&&!this.get(this._single.cid)&&delete this._single,this._single=this._single||this.last(),this._single!==t&&(t&&(t.trigger("selection:unsingle",t,this),this.get(t.cid)||this.trigger("selection:unsingle",t,this)),this._single&&this._single.trigger("selection:single",this._single,this)),this._single}});window.getStockpackQuery=function(e){return new A(null,{props:_.extend(_.defaults(e||{},{orderby:"date"}),{query:!0})})};var L={init:function(){var e=wp.media.view.MediaFrame.Post,t=wp.media.view.MediaFrame.Select;window.StockpackQueue=new A([],{query:!1}),window.StockpackQueueErrors=new Backbone.Collection,wp.media.view.MediaFrame.Post=e.extend({browseRouter:function(t){e.prototype.browseRouter.apply(this,arguments),t.set({stockpack:{text:wp.media.view.l10n.stockpack.title,priority:60}})},bindHandlers:function(){e.prototype.bindHandlers.apply(this,arguments),this.on("content:create:stockpack",this.stockpackContent,this)},stockpackContent:function(e){var t,i=this.state();(i.get("stockpack-images")||(i.set("stockpack-images",window.getStockpackQuery()),i.get("library").observe(window.StockpackQueue)),i.get("stockpack-selection"))||(t=i.get("stockpack-images").props.toJSON(),t=_.omit(t,"orderby","query"),i.set("stockpack-selection",new I(null,{multiple:!1,props:t})));this.$el.removeClass("hide-toolbar"),e.view=new j({collection:i.get("stockpack-images"),selection:i.get("stockpack-selection"),controller:this,model:i,idealColumnWidth:i.get("idealColumnWidth"),suggestedWidth:i.get("suggestedWidth"),suggestedHeight:i.get("suggestedHeight")})},getFrame:function(e){return this.states.findWhere({id:e})}}),wp.media.view.MediaFrame.Select=t.extend({browseRouter:function(e){t.prototype.browseRouter.apply(this,arguments),e.set({stockpack:{text:wp.media.view.l10n.stockpack.title,priority:60}})},bindHandlers:function(){t.prototype.bindHandlers.apply(this,arguments),this.on("content:create:stockpack",this.stockpackContent,this)},stockpackContent:function(e){var t,i=this.state();(i.get("stockpack-images")||(i.set("stockpack-images",window.getStockpackQuery()),i.get("library").observe(window.StockpackQueue)),i.get("stockpack-selection"))||(t=i.get("stockpack-images").props.toJSON(),t=_.omit(t,"orderby","query"),i.set("stockpack-selection",new I(null,{multiple:!1,props:t})));i.get("provider")||i.set("provider",""),this.$el.removeClass("hide-toolbar"),e.view=new j({collection:i.get("stockpack-images"),selection:i.get("stockpack-selection"),controller:this,model:i,idealColumnWidth:i.get("idealColumnWidth"),suggestedWidth:i.get("suggestedWidth"),suggestedHeight:i.get("suggestedHeight"),provider:i.get("provider")})},getFrame:function(e){return this.states.findWhere({id:e})}})}};t.a=L},function(e,t,i){var s;s=function(){var e=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","џ":"dz","Ґ":"G","ґ":"g","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","‘":"\'","’":"\'","“":"\\"","”":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₹":"indian rupee","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial"}');function t(t,i){if("string"!=typeof t)throw new Error("slugify: string argument expected");i="string"==typeof i?{replacement:i}:i||{};var s=t.split("").reduce(function(t,s){return t+(e[s]||s).replace(i.remove||/[^\w\s$*_+~.()'"!\-:@]/g,"")},"").trim().replace(/[-\s]+/g,i.replacement||"-");return i.lower?s.toLowerCase():s}return t.extend=function(t){for(var i in t)e[i]=t[i]},t},e.exports=s(),e.exports.default=s()},,,function(e,t,i){e.exports=i(5)},function(e,t,i){"use strict";i.r(t);var s=i(0);jQuery(function(){s.a.init()})}]);